<span data-bs-toggle="modal" data-bs-target="#{{ value.uid }}" style="cursor: pointer; color: #0D53DE; margin-right: 10px;">
  详细信息
</span>
<span data-bs-toggle="modal" data-bs-target="#{{ value.name + value.uid }}" style="cursor: pointer; color: #0D53DE; margin-right: 10px;">
    标注信息
</span>
<span style="cursor: pointer; color: #0D53DE; margin-right: 10px;">
  导出
</span>
<span data-bs-toggle="modal" data-bs-target="#{{ value.name }}" style="cursor: pointer; color: #F5483B;">
  删除
</span>
<div class="modal" id={{ value.uid }} tabindex="-1">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">评测集详情</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="datagrid">
          <div class="datagrid-item">
            <div class="datagrid-title">评测集名称</div>
            <div class="datagrid-content">{{ value.name }}</div>
          </div>
          <div class="datagrid-item">
            <div class="datagrid-title">风险类型</div>
            <div class="datagrid-content">
                <div>{{ value.focused_risks.risk_name }}</div>
            </div>
          </div>
          <div class="datagrid-item">
            <div class="datagrid-title">风险详情</div>
            <div class="datagrid-content">
                {% for risk in value.focused_risks.child_risk %}
                    <div>{{ risk.risk_name }}</div>
                    {% for subType in risk.third_risk %}
                        <span>{{ subType.risk_name }}</span>
                    {% endfor %}
                {% endfor %}
            </div>
          </div>
          <div class="datagrid-item">
            <div class="datagrid-title">访问路径</div>
            <div class="datagrid-content">
                <span id={{ value.id }} style="white-space:normal">{{ value.file }}</span>
                <button type="button" class="btn btn-primary" onclick="copyUrl({{ value.id }})" style="margin-left: 5px">复制</button>
            </div>
          </div>
          <div class="datagrid-item">
            <div class="datagrid-title">数据条数</div>
            <div class="datagrid-content">{{ value.qa_num }}</div>
          </div>
          <div class="datagrid-item">
            <div class="datagrid-title">语料字数</div>
            <div class="datagrid-content">{{ value.word_cnt }}</div>
          </div>
          <div class="datagrid-item">
            <div class="datagrid-title">评测集大小</div>
            <div class="datagrid-content">{{ value.volume }}</div>
          </div>
          <div class="datagrid-item">
            <div class="datagrid-title">更新时间</div>
            <div class="datagrid-content">{{ value.updated_at }}</div>
          </div>
            <div class="datagrid-item">
            <div class="datagrid-title">使用次数</div>
            <div class="datagrid-content">{{ value.used_by }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal" id={{ value.name }} tabindex="-1">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header" style="border-bottom: none">
        <h5 class="modal-title">确认删除此评测集</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-footer">
          <button type="button" class="btn" data-bs-dismiss="modal" aria-label="Close">取消</button>
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal" aria-label="Close" onclick="deleteDataset({{ value.id }})">删除</button>
      </div>
    </div>
  </div>
</div>

<div class="modal" id={{ value.name + value.uid }} tabindex="-1">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header" style="border-bottom: none">
        <h5 class="modal-title">评测集标注信息</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
        <div class="modal-body">
            <div class="table-responsive">
              <table class="table table-vcenter">
                <thead>
                  <tr>
                    <th>问题</th>
                    <th>回复</th>
                    <th>评判</th>
                      <th>标注</th>
                      <th>更新时间</th>
                  </tr>
                </thead>
                <tbody>
                    {% for item in value.label_info %}
                        <tr>
                            <td>{{ item[0] }}</td>
                            <td>{{ item[1] }}</td>
                            <td>{{ item[2] }}</td>
                            <td><button class="btn btn-primary">标注</button></td>
                            <td>2022-10-10 10:10:10</td>
                        </tr>
                    {% endfor %}
                </tbody>
              </table>
            </div>
        </div>
    </div>
  </div>
</div>


<script>
    function deleteDataset(id) {
        $.ajax({
            url: `/admin/dataset/delete/${id}`,
            type: 'DELETE',
            contentType: "application/json;charset=UTF-8",
            data: JSON.stringify({
                pk: id
            }),
            success: function () {
                location.reload();
            }
        })
    }
    function copyUrl(id) {
        const copyText = $("#"+id).text();
        navigator.clipboard.writeText(copyText);
        alert('复制成功');
    }
</script>